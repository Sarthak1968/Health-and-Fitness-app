<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Fitness Tracker</title>
    <style>
        /* Basic Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 3em;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .section {
            padding: 40px;
            border-bottom: 2px solid #f0f0f0;
        }

        .section:last-child {
            border-bottom: none;
        }

        h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
            border-left: 5px solid #667eea;
            padding-left: 15px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
            font-size: 16px;
        }

        input, select {
            width: 100%;
            padding: 14px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
            margin-top: 10px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .message {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
            font-weight: 500;
        }

        .success {
            background: #d1fae5;
            color: #065f46;
            border-left: 4px solid #10b981;
        }

        .error {
            background: #fee2e2;
            color: #991b1b;
            border-left: 4px solid #ef4444;
        }

        .card {
            background: #f9fafb;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            border-left: 5px solid #667eea;
            transition: all 0.3s;
        }

        .card:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .card h3 {
            color: #667eea;
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .card p {
            margin: 8px 0;
            color: #555;
            font-size: 15px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .stat-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-box h3 {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .stat-box p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: bold;
            margin-left: 10px;
        }

        .badge-normal { background: #10b981; color: white; }
        .badge-underweight { background: #f59e0b; color: white; }
        .badge-overweight { background: #f59e0b; color: white; }
        .badge-obese { background: #ef4444; color: white; }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #9ca3af;
        }

        .empty-state-icon {
            font-size: 5em;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .form-row, .stats {
                grid-template-columns: 1fr;
            }

            header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>ğŸ’ª Fitness Tracker</h1>
        <p>Track your fitness journey with ease!</p>
    </header>

    <!-- SECTION 1: Create User -->
    <div class="section">
        <h2>ğŸ‘¤ Create New User</h2>
        <div id="userMessage" class="message"></div>

        <form id="userForm">
            <div class="form-group">
                <label>ğŸ‘¤ Full Name:</label>
                <input type="text" id="userName" placeholder="Enter your name" required>
            </div>

            <div class="form-group">
                <label>ğŸ“§ Email:</label>
                <input type="email" id="userEmail" placeholder="your.email@example.com" required>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>ğŸ‚ Age:</label>
                    <input type="number" id="userAge" placeholder="25" required min="1" max="120">
                </div>

                <div class="form-group">
                    <label>âš–ï¸ Weight (kg):</label>
                    <input type="number" step="0.1" id="userWeight" placeholder="70.5" required>
                </div>
            </div>

            <div class="form-group">
                <label>ğŸ“ Height (meters):</label>
                <input type="number" step="0.01" id="userHeight" placeholder="1.75" required>
            </div>

            <button type="submit" class="btn">â• Create User</button>
        </form>

        <div id="userList" style="margin-top: 30px;"></div>
    </div>

    <!-- SECTION 2: Log Exercise -->
    <div class="section">
        <h2>ğŸƒ Log Exercise</h2>
        <div id="exerciseMessage" class="message"></div>

        <form id="exerciseForm">
            <div class="form-group">
                <label>ğŸ‘¤ Select User:</label>
                <select id="exerciseUserId" required>
                    <option value="">-- Choose a user first --</option>
                </select>
            </div>

            <div class="form-group">
                <label>ğŸ‹ï¸ Exercise:</label>
                <select id="exerciseName" required>
                    <option value="">-- Choose exercise --</option>
                    <option value="Running">ğŸƒ Running</option>
                    <option value="Walking">ğŸš¶ Walking</option>
                    <option value="Cycling">ğŸš´ Cycling</option>
                    <option value="Swimming">ğŸŠ Swimming</option>
                    <option value="Yoga">ğŸ§˜ Yoga</option>
                    <option value="Weight Training">ğŸ‹ï¸ Weight Training</option>
                    <option value="Dancing">ğŸ’ƒ Dancing</option>
                    <option value="Jump Rope">ğŸª¢ Jump Rope</option>
                    <option value="Hiking">ğŸ¥¾ Hiking</option>
                </select>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>â±ï¸ Duration (minutes):</label>
                    <input type="number" id="exerciseDuration" placeholder="30" required min="1">
                </div>

                <div class="form-group">
                    <label>ğŸ”¥ Calories Burned:</label>
                    <input type="number" id="exerciseCalories" placeholder="200" required min="1">
                </div>
            </div>

            <div class="form-group">
                <label>ğŸ“… Date:</label>
                <input type="date" id="exerciseDate" required>
            </div>

            <button type="submit" class="btn">âœ… Log Exercise</button>
        </form>

        <div id="exerciseList" style="margin-top: 30px;"></div>
    </div>

    <!-- SECTION 3: View Stats -->
    <div class="section">
        <h2>ğŸ“Š User Statistics</h2>

        <div class="form-group">
            <label>ğŸ‘¤ Select User:</label>
            <select id="statsUserId" onchange="loadStats()">
                <option value="">-- Choose a user --</option>
            </select>
        </div>

        <div id="statsDisplay"></div>
    </div>
</div>

<script>
    // API URL - Change this to your deployed URL when you put it online
    const API_URL = 'http://localhost:8080/api';

    let allUsers = [];

    // Set today's date as default
    document.getElementById('exerciseDate').valueAsDate = new Date();

    // Function to show messages
    function showMessage(elementId, message, type) {
        const element = document.getElementById(elementId);
        element.textContent = message;
        element.className = 'message ' + type;
        element.style.display = 'block';

        setTimeout(() => {
            element.style.display = 'none';
        }, 4000);
    }

    // Load all users
    async function loadUsers() {
        try {
            const response = await fetch(`${API_URL}/users`);
            allUsers = await response.json();

            displayUsers();
            updateUserDropdowns();
        } catch (error) {
            console.error('Error:', error);
            showMessage('userMessage', 'âŒ Cannot connect to server. Make sure the app is running!', 'error');
        }
    }

    // Display all users
    function displayUsers() {
        const userList = document.getElementById('userList');

        if (allUsers.length === 0) {
            userList.innerHTML = '<div class="empty-state"><div class="empty-state-icon">ğŸ‘¤</div><p>No users yet. Create your first user above!</p></div>';
            return;
        }

        userList.innerHTML = '<h3 style="color: #667eea; margin-bottom: 15px;">ğŸ“‹ All Users</h3>';

        allUsers.forEach(user => {
            const bmi = user.weight / (user.height * user.height);
            const bmiCategory = getBMICategory(bmi);

            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                    <h3>${user.name}</h3>
                    <p><strong>ğŸ“§ Email:</strong> ${user.email}</p>
                    <p><strong>ğŸ†” ID:</strong> ${user.id}</p>
                    <p><strong>ğŸ‚ Age:</strong> ${user.age} years</p>
                    <p><strong>âš–ï¸ Weight:</strong> ${user.weight} kg | <strong>ğŸ“ Height:</strong> ${user.height} m</p>
                    <p><strong>ğŸ“Š BMI:</strong> ${bmi.toFixed(1)} <span class="badge badge-${bmiCategory.toLowerCase()}">${bmiCategory}</span></p>
                `;
            userList.appendChild(card);
        });
    }

    // Get BMI category
    function getBMICategory(bmi) {
        if (bmi < 18.5) return 'Underweight';
        if (bmi < 25) return 'Normal';
        if (bmi < 30) return 'Overweight';
        return 'Obese';
    }

    // Update user dropdowns
    function updateUserDropdowns() {
        const dropdowns = ['exerciseUserId', 'statsUserId'];

        dropdowns.forEach(id => {
            const select = document.getElementById(id);
            select.innerHTML = '<option value="">-- Choose a user --</option>';

            allUsers.forEach(user => {
                const option = document.createElement('option');
                option.value = user.id;
                option.textContent = `${user.name} (${user.email})`;
                select.appendChild(option);
            });
        });
    }

    // Create new user
    document.getElementById('userForm').addEventListener('submit', async (e) => {
        e.preventDefault();

        const user = {
            name: document.getElementById('userName').value,
            email: document.getElementById('userEmail').value,
            age: parseInt(document.getElementById('userAge').value),
            weight: parseFloat(document.getElementById('userWeight').value),
            height: parseFloat(document.getElementById('userHeight').value)
        };

        try {
            const response = await fetch(`${API_URL}/users`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(user)
            });

            if (response.ok) {
                showMessage('userMessage', 'âœ… User created successfully!', 'success');
                document.getElementById('userForm').reset();
                loadUsers();
            } else {
                showMessage('userMessage', 'âŒ Error creating user', 'error');
            }
        } catch (error) {
            console.error('Error:', error);
            showMessage('userMessage', 'âŒ Cannot connect to server', 'error');
        }
    });

    // Log exercise
    document.getElementById('exerciseForm').addEventListener('submit', async (e) => {
        e.preventDefault();

        const exercise = {
            userId: document.getElementById('exerciseUserId').value,
            exerciseName: document.getElementById('exerciseName').value,
            durationMinutes: parseInt(document.getElementById('exerciseDuration').value),
            caloriesBurned: parseInt(document.getElementById('exerciseCalories').value),
            date: document.getElementById('exerciseDate').value
        };

        try {
            const response = await fetch(`${API_URL}/exercises`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(exercise)
            });

            if (response.ok) {
                showMessage('exerciseMessage', 'âœ… Exercise logged successfully!', 'success');
                document.getElementById('exerciseForm').reset();
                document.getElementById('exerciseDate').valueAsDate = new Date();
                loadExercises();
            } else {
                showMessage('exerciseMessage', 'âŒ Error logging exercise', 'error');
            }
        } catch (error) {
            console.error('Error:', error);
            showMessage('exerciseMessage', 'âŒ Cannot connect to server', 'error');
        }
    });

    // Load all exercises
    async function loadExercises() {
        try {
            const response = await fetch(`${API_URL}/exercises`);
            const exercises = await response.json();

            const exerciseList = document.getElementById('exerciseList');

            if (exercises.length === 0) {
                exerciseList.innerHTML = '<div class="empty-state"><div class="empty-state-icon">ğŸ‹ï¸</div><p>No exercises logged yet!</p></div>';
                return;
            }

            exerciseList.innerHTML = '<h3 style="color: #667eea; margin-bottom: 15px;">ğŸ“‹ Recent Exercises</h3>';

            // Show last 5 exercises
            exercises.slice(-5).reverse().forEach(exercise => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                        <h3>${exercise.exerciseName}</h3>
                        <p><strong>ğŸ‘¤ User:</strong> ${exercise.userId}</p>
                        <p><strong>â±ï¸ Duration:</strong> ${exercise.durationMinutes} minutes</p>
                        <p><strong>ğŸ”¥ Calories:</strong> ${exercise.caloriesBurned} kcal</p>
                        <p><strong>ğŸ“… Date:</strong> ${exercise.date}</p>
                    `;
                exerciseList.appendChild(card);
            });
        } catch (error) {
            console.error('Error:', error);
        }
    }

    // Load user statistics
    async function loadStats() {
        const userId = document.getElementById('statsUserId').value;
        const statsDisplay = document.getElementById('statsDisplay');

        if (!userId) {
            statsDisplay.innerHTML = '';
            return;
        }

        try {
            const response = await fetch(`${API_URL}/exercises/stats/${userId}`);
            const stats = await response.json();

            const user = allUsers.find(u => u.id === userId);
            const bmi = user.weight / (user.height * user.height);

            statsDisplay.innerHTML = `
                    <div class="stats">
                        <div class="stat-box">
                            <h3>${stats.totalExercises}</h3>
                            <p>Total Workouts</p>
                        </div>
                        <div class="stat-box">
                            <h3>${stats.totalMinutes}</h3>
                            <p>Total Minutes</p>
                        </div>
                        <div class="stat-box">
                            <h3>${stats.totalCalories}</h3>
                            <p>Calories Burned ğŸ”¥</p>
                        </div>
                    </div>
                    <div class="card" style="margin-top: 20px; text-align: center; font-size: 1.2em;">
                        <p><strong>ğŸ“Š Current BMI:</strong> ${bmi.toFixed(1)} <span class="badge badge-${getBMICategory(bmi).toLowerCase()}">${getBMICategory(bmi)}</span></p>
                    </div>
                `;
        } catch (error) {
            console.error('Error:', error);
            statsDisplay.innerHTML = '<p style="color: red; text-align: center;">âŒ Error loading statistics</p>';
        }
    }

    // Load data when page loads
    window.addEventListener('load', () => {
        loadUsers();
        loadExercises();
    });
</script>
</body>
</html>